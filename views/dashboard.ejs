<%- include ("./partials/messages.ejs") %>
<div class="dashboard-page">
    <div data-aim="dashboard" class="dashboard-block dashboard-block_edit" id="edit">
        <div class="dashboard-block_layout">
            <h2 class="dashboard-title" data-key="edit-profile">Edit Your Profile</h2>
            <p class="dashboard-subtitle" data-key="edit-profile-descr">Answer few questions and we will help you to
                find
                perfect restaurants matching
                your cuisine preferences and location</p>
        </div>
    </div>
    <div data-aim="dashboard" class="dashboard-block dashboard-block_main" id="main">
        <div class="dashboard-block_layout">
            <h2 class="dashboard-title" data-key="explore-our-restaurants">Explore Our Restaurants</h2>
            <p class="dashboard-subtitle" data-key="explore-main-page-descr">Check our restaurant's suggestions and
                filter results by location and tastes
            </p>
        </div>
    </div>
    <div data-aim="dashboard" class="dashboard-block dashboard-block_reservations" id="reservation">
        <div class="dashboard-block_layout">
            <h2 class="dashboard-title" data-key="check-reservations">Check Your Reservations</h2>
            <p class="dashboard-subtitle" data-key="check-reservations-descr">Control and manage your current
                restaurant's bookings</p>

            <div id="userReservations" class="invisible">
                <% reservations.forEach( elem => { %>
                    <div class="reservation-card_container">
                        <div class="restaurant-image"></div>
                        <ul class="reservation-card">
                            <li>
                                <span class="restaurant-name"><%= elem.restaurantName %></span>
                            </li>
                            <li class="reservation-guest-amount">
                                <svg id="party-size" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <g  fill="none" fill-rule="evenodd">
                                        <path d="M16.2631227,13.2586903 C18.1508089,13.7307269 19.5546223,14.8487636 20.4745627,16.6128003 C20.6979132,17.0410874 20.8145462,17.5169728 20.8145462,18 C20.8145462,19.656863 19.4713933,21.0000158 17.8145304,21.0000158 L10.1861272,21 C9.70310501,21 9.22722453,20.8833688 8.79894144,20.6600214 C7.32985342,19.8938999 6.7599865,18.0819045 7.52610601,16.6128155 C8.44596957,14.8489171 9.84962812,13.7309148 11.7370816,13.2588084 C10.4715685,12.4922943 9.62582312,11.102268 9.62582312,9.51470731 L9.62582312,9.37418158 C9.62582312,6.9583878 11.5842109,5 14.0000047,5 C16.4157985,5 18.3741863,6.9583878 18.3741863,9.37418158 L18.3741863,9.51470731 C18.3741863,11.1021865 17.5285277,12.4921515 16.2631227,13.2586903 Z M14.0000047,6.77777778 C12.5505284,6.77777778 11.3754957,7.95281046 11.3754957,9.40228673 L11.3754957,9.48660216 C11.3754957,10.9360784 12.5505284,12.1111111 14.0000047,12.1111111 C15.449481,12.1111111 16.6245136,10.9360784 16.6245136,9.48660216 L16.6245136,9.40228673 C16.6245136,7.95281046 15.449481,6.77777778 14.0000047,6.77777778 Z M19.1407223,17.8834842 C18.3953349,15.8130133 16.6818457,14.7777778 14.0002549,14.7777778 C11.3186989,14.7777778 9.60510293,15.8129863 8.85946694,17.8834035 L8.85948629,17.8834105 C8.67235704,18.4030147 8.94188126,18.9759353 9.46148548,19.1630646 C9.57016378,19.2022038 9.68480169,19.2222174 9.80031295,19.2222174 L18.1998194,19.2222365 C18.7521147,19.2222365 19.1998386,18.7745127 19.1998386,18.2222174 C19.1998386,18.10674 19.1798375,17.9921351 19.1407223,17.8834842 Z"
                                               fill="#2D333F"></path>
                                        <path d="M6.84758092,15.2868877 L4.95281574,15.2868904 C4.70769063,15.2868904 4.46465381,15.2418286 4.23582208,15.1539516 C3.2046777,14.7579669 2.68977901,13.6010502 3.08575512,12.5699026 C3.82069874,10.6561088 5.1320025,9.5117912 7.0196664,9.13694976 C5.82934918,8.60434475 5,7.4096537 5,6.02125777 L5,5.91165437 C5,4.02744969 6.52744969,2.5 8.41165437,2.5 C9.71370481,2.5 10.8453945,3.22940104 11.4204073,4.30188698 C11.0517254,4.51502578 10.7078278,4.76626177 10.3940966,5.05021297 C10.0643294,4.36191626 9.36117108,3.88658243 8.54699262,3.88658243 C7.41646981,3.88658243 6.5,4.80305224 6.5,5.93357505 L6.5,5.99933709 C6.5,7.1298599 7.41646981,8.04632971 8.54699262,8.04632971 C8.56352789,8.04632971 8.58001737,8.04613366 8.59645886,8.04574374 C8.48054072,8.51136745 8.41901325,8.99849847 8.41901325,9.5 C8.41901325,9.67501296 8.42650641,9.84827579 8.44118941,10.0194852 C6.51730233,10.1578931 5.25085251,11.0336588 4.64183995,12.6467822 L4.64182597,12.646777 C4.44675453,13.1634729 4.70748271,13.7404744 5.22417865,13.9355458 C5.33706205,13.9781634 5.45672639,14 5.57738674,14 L7.95514558,13.9999938 C7.52906888,14.3735851 7.15548041,14.8065681 6.84758092,15.2868877 Z"
                                               fill="#2D333F"></path>
                                    </g>
                                </svg>
                                <span><%= elem.guestAmount %></span> People
                            </li>
                            <li class="reservation-time">
                                <svg id="calendar" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <g fill="none" fill-rule="evenodd">
                                        <path d="M17,5 L19,5 C20.1045695,5 21,5.8954305 21,7 L21,19 C21,20.1045695 20.1045695,21 19,21 L5,21 C3.8954305,21 3,20.1045695 3,19 L3,7 C3,5.8954305 3.8954305,5 5,5 L7,5 L7,4 C7,3.44771525 7.44771525,3 8,3 C8.55228475,3 9,3.44771525 9,4 L9,5 L15,5 L15,4 C15,3.44771525 15.4477153,3 16,3 C16.5522847,3 17,3.44771525 17,4 L17,5 Z M19,9 L19,7 L5,7 L5,9 L19,9 Z M19,11 L5,11 L5,19 L19,19 L19,11 Z"
                                              fill="#2D333F"></path>
                                    </g>
                                </svg>
                                <span><%= elem.reservationDate %></span>,
                                <span><%= elem.reservationTime %></span>
                            </li>
                            <form action="/delete" method="POST">
                                <input style="display: none" type="text" name="reservationId" value='<%= elem._id %>'>
                                <button type="submit" id="delete_btn">Delete reservation</button>
                            </form>
                        </ul>
                    </div>

                <% }) %>
                <button id="close_btn">X</button>
            </div>
        </div>
    </div>
    <div data-aim="dashboard" class="dashboard-block dashboard-block_logout" id="logout">
        <div class="dashboard-block_layout">
            <h2 class="dashboard-title" data-key="log-out">Logout from Our App </h2>
            <p class="dashboard-subtitle" data-key="log-out-descr">Leave our application and get to the login page</p>
        </div>
    </div>
    <div class="dashboard-central-block">
        <p class="lead mb-3 dashboard-title"><span data-key="welcome">Welcome,</span> <span
                    class="user-name"><%= name %></span>!</p>
        <p class="dashboard-hidden-mail"><span class="user-email"><%= email %></span>!</p>
        <p class="dashboard-subtitle" data-key="what-to-do">What would you like to do?</p>
    </div>

</div>
<script type="module" src="/public/javascript/Main.js"></script>
<script type="module" src="/public/javascript/changeLanguage.js"></script>
<script type="module" src="/public/javascript/Reservations.js"></script>